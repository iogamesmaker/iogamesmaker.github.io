(()=>{"use strict";let e,t,n,o,s,i,u,f,l=0,a=0,g=0;self.gc&&function e(){self.setTimeout(e,1e3),l-a>2e3&&l-g<4&&(self.gc(),a=l),g=l}();let c={};self.onmessage=function(e){c[e.data.Request]?.(e.data)},c.SaveStuff=function(l){e=l.VoxelTypes,t=l.Data8,n=l.Data64,o=l.GPUBoundingBox1,s=l.GPUInfo8,i=l.GPUInfo64,u=l.Data64Offset,f=l.OwnQueueSize},c.GenerateBoundingGeometry=function(e){l++;const t=e.RegionX,a=e.RegionY,g=e.RegionZ,c=e.Depth,r=[],p=t-u[3*c+0],h=a-u[3*c+1],R=g-u[3*c+2],d=268435455&i[c<<9|p<<6|h<<3|R];n[c<<9|p<<6|h<<3|R];let m=0;for(let e=7;e>=0;--e)for(let t=7;t>=0;--t)for(let n=7;n>=0;--n)if(0==(s[d<<9|t<<6|e<<3|n]>>31&1)){const i=t<<6|e<<3|n,u=d<<9|i,f=(s[u],o[u]>>15&7),l=o[u]>>12&7,a=o[u]>>9&7,g=o[u]>>6&7,c=o[u]>>3&7,p=7&o[u];if(g<f||c<l||p<a)continue;{let e=l,t=a,n=c,o=p;n++,o++,m+=6,r.push(4<<21|f<<17|n<<13|t<<9|i,4<<21|f<<17|e<<13|t<<9|i,4<<21|f<<17|n<<13|o<<9|i,4<<21|f<<17|e<<13|o<<9|i)}{let e=f,t=a,n=g,o=p;n++,o++,m+=6,r.push(5<<21|n<<17|l<<13|o<<9|i,5<<21|e<<17|l<<13|o<<9|i,5<<21|n<<17|l<<13|t<<9|i,5<<21|e<<17|l<<13|t<<9|i)}{let e=f,t=l,n=g,o=c;n++,o++,m+=6,r.push(6<<21|n<<17|t<<13|a<<9|i,6<<21|e<<17|t<<13|a<<9|i,6<<21|n<<17|o<<13|a<<9|i,6<<21|e<<17|o<<13|a<<9|i)}{let e=l,t=a,n=c,o=p;n++,o++,m+=6,r.push(2<<21|g+1<<17|n<<13|o<<9|i,2<<21|g+1<<17|e<<13|o<<9|i,2<<21|g+1<<17|n<<13|t<<9|i,2<<21|g+1<<17|e<<13|t<<9|i)}{let e=f,t=a,n=g,o=p;n++,o++,m+=6,r.push(1<<21|e<<17|c+1<<13|o<<9|i,1<<21|n<<17|c+1<<13|o<<9|i,1<<21|e<<17|c+1<<13|t<<9|i,1<<21|n<<17|c+1<<13|t<<9|i)}{let e=f,t=l,n=g,o=c;n++,o++,m+=6,r.push(0|e<<17|t<<13|p+1<<9|i,0|n<<17|t<<13|p+1<<9|i,0|e<<17|o<<13|p+1<<9|i,0|n<<17|o<<13|p+1<<9|i)}}void 0!==f&&Atomics.sub(f,0,1);const G=new Uint32Array(r);self.postMessage({Request:"GenerateBoundingGeometry",IndexCount:m,Info:G,RegionX:t,RegionY:a,RegionZ:g,Depth:c,Time:e.Time},[G.buffer])}})();